<h5 class="center-align margin">Answers for form &nbsp;<b>{{ this.results ? this.results.formName : null }}</b></h5>
<!-- <app-pie-chart></app-pie-chart> -->
<div>
  <div class="grid">
    <div class="col s12">
      <div class="tabs">
        <a [ngClass]="{ active: this.activeTab === 0 }" (click)="this.activeTab = 0">BY QUESTION</a>
        <a [ngClass]="{ active: this.activeTab === 1 }" (click)="this.activeTab = 1">BY SUBMISSIONS</a>
      </div>
      <div class="page padding" [ngClass]="{ active: this.activeTab === 0 }" *ngIf="this.results">
        <!-- <table class="border space" style="width: 100%">
          <thead class="table-width" style="width: 100%">
            <th></th>
            <th style="width: 10%">Question</th>
            <th>Answer count</th>
            <th></th>
            <th></th>
          </thead>
          <tbody *ngIf="this.results">
            <tr *ngFor="let question of this.results.questions; let i = index">
              <td>{{ i + 1 }}.</td>
              <td>
                <strong>{{ question.query }}</strong>
              </td>
              <td>{{ this.answersByquestion(i).length }}</td>
              <td>
                <button class="extra center padding" (click)="showGraph(i)"><i>leaderboard</i>Anser graph</button>
                
              </td>
              <td>
                <button class="extra center padding" (click)="showAnswersToQuestion(i)"><i>list</i>Unique answers</button>
              </td>
            </tr>
            
          </tbody>
        </table> -->
        <article *ngFor="let question of this.results.questions; let i = index">
            <div class="row">
              <h6>{{i+1}}.</h6>
              <div class="max">
                <h5>{{ question.query }}</h5>
              </div>
              <nav class="no-space" (click)="showGraph(i)">
                <button class="left-round"><i>leaderboard</i>Anser graph</button>
                <button class="right-round no-padding fill"><i>{{ this.graphResults[i] ? 'arrow_drop_up' : 'arrow_drop_down' }}</i></button>
              </nav>
            </div>
            <div class="row">
              <app-pie-chart [results]="this.graphResults[i]" class="max"></app-pie-chart>
            </div>

        </article>
      </div>
      <div class="page padding" [ngClass]="{ active: this.activeTab === 1 }">
        <table class="border space">
          <thead style="width: 100%">
            <th></th>
            <th>Answer date</th>
            <th>Answers</th>
            <th></th>
          </thead>
          <tbody *ngIf="this.results">
            <tr *ngFor="let submision of this.results.submissions; let i = index">
              <td>{{ i + 1 }}.</td>
              <td>{{ submision.submitDate | date: "medium" }}</td>
              <td>
                <b>{{ submision.answers.length }}</b> /
                {{ this.results.questions.length }}
              </td>
              <td>
                <button class="extra padding" (click)="showAnswersFromSubmission(i)">Browse answers</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>


