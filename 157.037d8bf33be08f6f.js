"use strict";(self.webpackChunkpolyform_front=self.webpackChunkpolyform_front||[]).push([[157],{5157:(H,f,m)=>{m.r(f),m.d(f,{FormListModule:()=>W});var i=m(2593),d=m(6396),x=m(5792),h=m(5058),g=m(1813),q=m(2790),c=m(7954),t=m(2358),v=m(6522),Z=m(6443),l=m(9232);function w(o,r){if(1&o&&t._UZ(0,"textarea",5),2&o){const e=t.oxw(2);t.Q6J("minlength",e.min)("maxlength",e.max)("formControlName",e.controlName)("required",e.question.required)}}function T(o,r){if(1&o&&(t.TgZ(0,"form",3),t.YNc(1,w,1,4,"textarea",4),t.qZA()),2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("ngIf",e.max-e.min>=50)}}function C(o,r){if(1&o&&(t.TgZ(0,"div",6)(1,"small"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"small"),t._uU(5),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.hij("Min. characters: ",e.min,""),t.xp6(3),t.hij("Max. characters: ",e.max,"")}}function A(o,r){if(1&o&&(t.TgZ(0,"form",7),t._UZ(1,"input",8),t.TgZ(2,"small"),t._uU(3),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"small"),t._uU(6),t.qZA()()),2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("minlength",e.min)("maxlength",e.max)("formControlName",e.controlName)("required",e.question.required),t.xp6(2),t.hij("Min. characters: ",e.min,""),t.xp6(3),t.hij("Max. characters: ",e.max,"")}}let b=(()=>{class o{constructor(){this.min=0,this.max=10,this.controlName=""}ngOnInit(){this.options=this.question.details,this.min=this.options.minWords,this.max=this.options.maxWords,this.controlName=this.question.index+"q",this.question.required&&this.form.addValidators(i.kI.required)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-text"]],inputs:{question:"question",form:"form"},decls:4,vars:3,consts:[["class","field background border no-margin","style","height: 100%;",3,"formGroup",4,"ngIf"],["class","no-margin",4,"ngIf"],["class","field background border",3,"formGroup",4,"ngIf"],[1,"field","background","border","no-margin",2,"height","100%",3,"formGroup"],["style","height: 10em;","type","text","placeholder","Your answer",3,"minlength","maxlength","formControlName","required",4,"ngIf"],["type","text","placeholder","Your answer",2,"height","10em",3,"minlength","maxlength","formControlName","required"],[1,"no-margin"],[1,"field","background","border",3,"formGroup"],["type","text","placeholder","Your answer",3,"minlength","maxlength","formControlName","required"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.YNc(1,T,2,2,"form",0),t.YNc(2,C,6,2,"div",1),t.YNc(3,A,7,7,"form",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.max-n.min>=50),t.xp6(1),t.Q6J("ngIf",n.max-n.min>=50),t.xp6(1),t.Q6J("ngIf",n.max-n.min<50))},directives:[l.O5,i._Y,i.JL,i.sg,i.Fj,i.wO,i.nD,i.JJ,i.u,i.Q7],styles:[""]}),o})();var N=m(7611);const y=function(o,r){return{min:o,max:r}};let J=(()=>{class o{constructor(){this.min=0,this.max=0,this.prefix="",this.suffix="",this.precision=2,this.controlName=""}ngOnInit(){this.options=this.question.details,this.min=this.options.min,this.max=this.options.max,this.prefix=this.options.prefix,this.suffix=this.options.suffix,this.precision=this.options.precision,this.controlName=this.question.index+"q"}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-number"]],inputs:{question:"question",form:"form"},decls:7,vars:11,consts:[[1,"field","border","background",3,"formGroup"],["type","number","placeholder","Enter a number",3,"formControlName","min","max","appForceMinMax","required"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"input",1),t.TgZ(2,"small"),t._uU(3),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"small"),t._uU(6),t.qZA()()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("formControlName",n.controlName)("min",n.min)("max",n.max)("appForceMinMax",t.WLB(8,y,n.min,n.max))("required",n.question.required),t.xp6(2),t.hij("Min: ",n.min,""),t.xp6(3),t.hij("Max: ",n.max,""))},directives:[i._Y,i.JL,i.sg,i.wV,i.qQ,i.Fd,i.Fj,i.JJ,i.u,N.T,i.Q7],styles:[""]}),o})();function F(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(1,"Reset "),t.TgZ(2,"i"),t._uU(3,"backspace"),t.qZA()()}}let Q=(()=>{class o{constructor(){this.controlName=""}ngOnInit(){this.controlName=this.question.index+"q"}onReset(){this.form.get(this.controlName).reset()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-date"]],inputs:{question:"question",form:"form"},decls:8,vars:4,consts:[[1,"grid","middle-align",3,"formGroup"],[1,"s3"],[1,"field","background","border","s6","no-margin"],["type","date","placeholder","Your answer",1,"",3,"required","formControlName"],[3,"click",4,"ngIf"],[3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"input",3),t.TgZ(4,"i"),t._uU(5,"event"),t.qZA()(),t.YNc(6,F,4,0,"button",4),t._UZ(7,"div",1),t.qZA()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(3),t.Q6J("required",n.question.required)("formControlName",n.controlName),t.xp6(3),t.Q6J("ngIf",n.form.get(n.controlName).value))},directives:[i._Y,i.JL,i.sg,i.Fj,i.Q7,i.JJ,i.u,l.O5],styles:[""]}),o})();var _=m(284);function U(o,r){if(1&o&&(t.TgZ(0,"p",3)(1,"label",4),t._UZ(2,"input",5),t.TgZ(3,"span"),t._uU(4),t.qZA()()()),2&o){const e=r.$implicit,n=r.index,s=t.oxw();t.xp6(2),t.Q6J("formControlName",s.controlName)("value",s.controlName+n),t.xp6(2),t.Oqu(e)}}let I=(()=>{class o{constructor(){this.controlName="",this.type="checkbox",this.lastChanged="",this.lastValues=[]}ngOnInit(){this.options=this.question.details,this.controlName=this.question.index+"q",this.type=1===this.options.limit?"radio":"checkbox"}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-radio"]],inputs:{question:"question",form:"form"},decls:4,vars:4,consts:[["appCheckboxValidator","",1,"grid",3,"formGroup","limit","requiredAny"],[1,"absolute","right","top",3,"click"],["class","s12 no-margin",4,"ngFor","ngForOf"],[1,"s12","no-margin"],[1,"radio"],["type","radio",3,"formControlName","value"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0)(1,"button",1),t.NdJ("click",function(){return n.form.get(n.controlName).reset()}),t._uU(2,"Reset"),t.qZA(),t.YNc(3,U,5,3,"p",2),t.qZA()),2&e&&(t.Q6J("formGroup",n.form)("limit",1)("requiredAny",n.question.required),t.xp6(3),t.Q6J("ngForOf",n.options.answers))},directives:[i._Y,i.JL,_.c,i.sg,l.sg,i._,i.Fj,i.JJ,i.u],styles:[""]}),o})();var Y=m(4089);function G(o,r){if(1&o&&(t.TgZ(0,"p",3)(1,"label",4),t._UZ(2,"input",5),t.TgZ(3,"span"),t._uU(4),t.qZA()()()),2&o){const e=r.$implicit,n=r.index,s=t.oxw();t.xp6(2),t.Q6J("formControlName",s.controlName+n),t.xp6(2),t.Oqu(e)}}let L=(()=>{class o{constructor(){this.controlName="",this.lastChanged="",this.lastValues=[]}ngOnInit(){this.options=this.question.details,this.controlName=this.question.index+"q"}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-multiple"]],inputs:{question:"question",form:"form"},decls:4,vars:6,consts:[["appCheckboxValidator","",1,"row",3,"formGroup","limit","requiredAny"],["class","col s6",4,"ngFor","ngForOf"],["appOpacity","",1,"red-text",3,"if"],[1,"col","s6"],[1,"checkbox"],["type","checkbox","value","this.controlName",3,"formControlName"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.YNc(1,G,5,2,"p",1),t.qZA(),t.TgZ(2,"strong",2),t._uU(3),t.qZA()),2&e&&(t.Q6J("formGroup",n.form)("limit",n.options.limit)("requiredAny",n.question.required),t.xp6(1),t.Q6J("ngForOf",n.options.answers),t.xp6(1),t.Q6J("if",n.form.errors),t.xp6(1),t.hij("You can select only ",n.options.limit," answers"))},directives:[i._Y,i.JL,_.c,i.sg,l.sg,i.Wl,i.JJ,i.u,Y.m],styles:[""]}),o})();function O(o,r){1&o&&(t.TgZ(0,"div")(1,"i",15),t._uU(2,"new_releases"),t.qZA(),t.TgZ(3,"div",16),t._uU(4,"Answer to this question is required"),t.qZA()())}function M(o,r){if(1&o&&t._UZ(0,"app-text",19),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.Q6J("question",e)("form",n.formGroup)}}function j(o,r){if(1&o&&t._UZ(0,"app-number",19),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.Q6J("question",e)("form",n.formGroup)}}function k(o,r){if(1&o&&t._UZ(0,"app-date",19),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.Q6J("question",e)("form",n.formGroup)}}function S(o,r){if(1&o&&t._UZ(0,"app-radio",19),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.Q6J("question",e)("form",n.formGroup)}}function R(o,r){if(1&o&&t._UZ(0,"app-multiple",19),2&o){const e=t.oxw(2),n=e.$implicit,s=e.index,u=t.oxw(2);t.Q6J("question",n)("form",u.nestedFormGroups[s])}}function $(o,r){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,M,1,2,"app-text",18),t.YNc(2,j,1,2,"app-number",18),t.YNc(3,k,1,2,"app-date",18),t.YNc(4,S,1,2,"app-radio",18),t.YNc(5,R,1,2,"app-multiple",18),t.qZA()),2&o){const e=r.ngIf,n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","text"===e.type),t.xp6(1),t.Q6J("ngIf","number"===e.type),t.xp6(1),t.Q6J("ngIf","date"==n.type),t.xp6(1),t.Q6J("ngIf","multiple"===e.type&&e.details.limit),t.xp6(1),t.Q6J("ngIf","multiple"===n.type&&1!==n.details.limit)}}function D(o,r){if(1&o&&(t.TgZ(0,"div",5),t._UZ(1,"div",6),t.TgZ(2,"div",7)(3,"article",8)(4,"div",9)(5,"h3",10),t._uU(6),t.qZA(),t.TgZ(7,"h5",11),t._uU(8),t.qZA(),t.YNc(9,O,5,0,"div",12),t.qZA(),t._UZ(10,"br")(11,"hr")(12,"br"),t.TgZ(13,"div",5),t._UZ(14,"div",13),t.YNc(15,$,6,5,"div",14),t._UZ(16,"div",13),t.qZA()()(),t._UZ(17,"div",6),t.qZA()),2&o){const e=r.$implicit,n=r.index,s=t.oxw(2);t.xp6(6),t.hij("",n+1,"."),t.xp6(2),t.Oqu(e.query),t.xp6(1),t.Q6J("ngIf",e.required),t.xp6(6),t.Q6J("ngIf",s.checkQuestionType(e))}}function V(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.YNc(1,D,18,4,"div",3),t.TgZ(2,"button",4),t._uU(3,"Submit\xa0\xa0"),t.TgZ(4,"i"),t._uU(5,"send"),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.formGroup),t.xp6(1),t.Q6J("ngForOf",e.questions),t.xp6(1),t.Q6J("disabled",!e.formGroup.valid)}}let X=(()=>{class o{constructor(e,n,s,u){this.store=e,this.beerService=n,this.router=s,this.actions=u,this.valid=!1,this.values=[],this.notFilled=!0,this.nestedFormGroups=[],this.required=[],this.formGroup=new i.cw({})}ngOnInit(){const e=this.router.url.substring(this.router.url.lastIndexOf("/")+1);e.length===q.N.idLength?this.store.dispatch(c.lR({id:e})):this.router.navigate(["/"]),this.storeSub=this.store.select("form").subscribe(n=>{if(n.errorMsg&&this.router.navigate(["/"]),n.form){this.form=n.form,this.formName=n.form.name||"Unnamed Form \u{1f937}",this.questions=n.questions;const s={};for(let a of this.questions)if("multiple"===a.type&&1!==a.details.limit){const p={};for(let[B,z]of a.details.answers.entries())p[a.index+"q"+B]=new i.NI(!1);this.nestedFormGroups[a.index]=new i.cw(p),s[a.index+"q"]=this.nestedFormGroups[a.index]}else s[a.index+"q"]=new i.NI(null,a.required?i.kI.required:null);this.formGroup=new i.cw(s)}}),this.actions.pipe((0,h.l4)(c.Wr),(0,g.q)(1)).subscribe(()=>{this.beerService.modal.next({type:"general",content:{msg:"Thank you for filling out the form.",sub:"Your answers have been sent to the form's creator.",redirect:!0}}),this.router.navigate(["/"])})}onSubmit(){this.store.dispatch(c.x8({values:this.flatValues(this.formGroup.value),questions:this.questions}))}flatValues(e){return Object.values(e).reduce((n,s,u)=>"object"==typeof s&&s?[...n,Object.values(s).map((a,p)=>a?this.questions[u].details.answers[p]:null).filter(a=>!!a)]:[...n,s],[])}checkQuestionType(e){switch(e.type){case"text":case"number":case"multiple":case"date":case"file":return e;default:return null}}ngOnDestroy(){this.storeSub.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.yh),t.Y36(Z._),t.Y36(d.F0),t.Y36(h.eX))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-list"]],decls:4,vars:4,consts:[[1,"center-align","margin"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["class","grid",4,"ngFor","ngForOf"],["type","submit",1,"button","extra","center",3,"disabled"],[1,"grid"],[1,"col","s2"],[1,"col","s8"],[1,"large-margin"],[1,"row"],[1,"circle"],[1,"max"],[4,"ngIf"],[1,"col","m2"],["class","col s12 m8",4,"ngIf"],[1,"red-text"],[1,"tooltip","left"],[1,"col","s12","m8"],[3,"question","form",4,"ngIf"],[3,"question","form"]],template:function(e,n){1&e&&(t.TgZ(0,"h4",0),t._uU(1),t.ALo(2,"titlecase"),t.qZA(),t.YNc(3,V,6,3,"form",1)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,2,n.formName)),t.xp6(2),t.Q6J("ngIf",n.questions))},directives:[l.O5,i._Y,i.JL,i.sg,l.sg,b,J,Q,I,L],pipes:[l.rS],styles:[""]}),o})(),W=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[i.UX,i.u5,x.m,d.Bz.forChild([{path:"",component:X}])]]}),o})()}}]);